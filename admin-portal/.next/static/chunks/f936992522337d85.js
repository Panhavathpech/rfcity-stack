(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,68290,e=>{"use strict";var s=e.i(42565),t=e.i(32742);let l=["owner","admin","editor","viewer"];function a({initialUsers:e,viewerRole:a}){let[r,i]=(0,t.useState)(e),[d,o]=(0,t.useState)({email:"",role:"viewer",status:"invited"}),[n,c]=(0,t.useState)(!1),[m,u]=(0,t.useState)(null),x="owner"===a;async function p(e){if(e.preventDefault(),!x)return;c(!0),u(null);let s=await fetch("/api/users",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(d)});if(c(!1),!s.ok){let e=await s.json().catch(()=>({}));u(e?.message??"Unable to invite user");return}let t=await s.json();i(e=>[t.user,...e]),o({email:"",role:"viewer",status:"invited"})}async function h(e,s){(await fetch(`/api/users/${e}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)})).ok?i((await fetch("/api/users").then(e=>e.json())).users):alert("Unable to update user. Check your permissions and try again.")}async function b(e){confirm("Disable this user?")&&((await fetch(`/api/users/${e}`,{method:"DELETE"})).ok?i(s=>s.map(s=>s.id===e?{...s,status:"disabled"}:s)):alert("Unable to disable user."))}return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"rounded-3xl border border-slate-200 bg-white p-6 shadow-sm",children:[(0,s.jsx)("h2",{className:"text-lg font-semibold text-slate-900",children:"Invite user"}),x?(0,s.jsxs)("form",{className:"mt-5 grid gap-4 sm:grid-cols-3",onSubmit:p,children:[(0,s.jsxs)("div",{className:"sm:col-span-3",children:[(0,s.jsx)("label",{className:"text-sm font-semibold text-slate-600",children:"Email"}),(0,s.jsx)("input",{type:"email",value:d.email,onChange:e=>o(s=>({...s,email:e.target.value})),className:"mt-2 w-full rounded-xl border border-slate-200 px-4 py-2 text-sm focus:border-emerald-600 focus:outline-none focus:ring-2 focus:ring-emerald-100",placeholder:"teammate@example.com",required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-sm font-semibold text-slate-600",children:"Role"}),(0,s.jsx)("select",{value:d.role,onChange:e=>o(s=>({...s,role:e.target.value})),className:"mt-2 w-full rounded-xl border border-slate-200 px-4 py-2 text-sm focus:border-emerald-600 focus:outline-none focus:ring-2 focus:ring-emerald-100",children:l.map(e=>(0,s.jsx)("option",{value:e,children:e},e))})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-sm font-semibold text-slate-600",children:"Status"}),(0,s.jsxs)("select",{value:d.status,onChange:e=>o(s=>({...s,status:e.target.value})),className:"mt-2 w-full rounded-xl border border-slate-200 px-4 py-2 text-sm focus:border-emerald-600 focus:outline-none focus:ring-2 focus:ring-emerald-100",children:[(0,s.jsx)("option",{value:"invited",children:"Invited"}),(0,s.jsx)("option",{value:"active",children:"Active"}),(0,s.jsx)("option",{value:"disabled",children:"Disabled"})]})]}),(0,s.jsxs)("div",{className:"sm:col-span-3",children:[(0,s.jsx)("button",{type:"submit",disabled:n,className:"w-full rounded-xl bg-emerald-600 px-4 py-3 text-sm font-semibold uppercase tracking-wide text-white transition hover:bg-emerald-700 disabled:cursor-not-allowed disabled:opacity-70",children:n?"Sending invite...":"Send invite"}),m?(0,s.jsx)("p",{className:"mt-2 text-sm text-red-600",children:m}):null]})]}):(0,s.jsx)("p",{className:"mt-4 text-sm text-slate-500",children:"Only owners can invite new users."})]}),(0,s.jsxs)("div",{className:"rounded-3xl border border-slate-200 bg-white p-6 shadow-sm",children:[(0,s.jsx)("h2",{className:"text-lg font-semibold text-slate-900",children:"Team"}),(0,s.jsx)("div",{className:"mt-4 overflow-x-auto",children:(0,s.jsxs)("table",{className:"min-w-full divide-y divide-slate-100 text-sm",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{className:"text-left text-xs uppercase tracking-wide text-slate-500",children:[(0,s.jsx)("th",{className:"px-3 py-3",children:"Email"}),(0,s.jsx)("th",{className:"px-3 py-3",children:"Role"}),(0,s.jsx)("th",{className:"px-3 py-3",children:"Status"}),(0,s.jsx)("th",{className:"px-3 py-3",children:"Actions"})]})}),(0,s.jsx)("tbody",{className:"divide-y divide-slate-100",children:r.map(e=>(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{className:"px-3 py-3 font-semibold",children:e.email}),(0,s.jsx)("td",{className:"px-3 py-3",children:e.role}),(0,s.jsx)("td",{className:"px-3 py-3",children:e.status}),(0,s.jsx)("td",{className:"px-3 py-3",children:(0,s.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,s.jsx)("button",{onClick:()=>h(e.id,{status:"disabled"===e.status?"active":"disabled"}),className:"rounded-full border border-slate-200 px-4 py-1 text-xs font-semibold uppercase tracking-wide text-slate-600 hover:border-emerald-200 hover:text-emerald-700",children:"disabled"===e.status?"Activate":"Disable"}),"owner"!==e.role?(0,s.jsx)("button",{onClick:()=>h(e.id,{role:"viewer"===e.role?"editor":"viewer"}),className:"rounded-full border border-slate-200 px-4 py-1 text-xs font-semibold uppercase tracking-wide text-slate-600 hover:border-emerald-200 hover:text-emerald-700",children:"Toggle Role"}):null,(0,s.jsx)("button",{onClick:()=>h(e.id,{password:Array.from(globalThis.crypto.getRandomValues(new Uint8Array(6)),e=>(e%36).toString(36)).join("")}),className:"rounded-full border border-slate-200 px-4 py-1 text-xs font-semibold uppercase tracking-wide text-slate-600 hover:border-emerald-200 hover:text-emerald-700",children:"Reset Password"}),"owner"===a?(0,s.jsx)("button",{onClick:()=>b(e.id),className:"rounded-full border border-red-200 px-4 py-1 text-xs font-semibold uppercase tracking-wide text-red-600 hover:bg-red-50",children:"Archive"}):null]})})]},e.id))})]})})]})]})}e.s(["UsersTable",()=>a])}]);