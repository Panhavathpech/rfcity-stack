module.exports=[73232,a=>{"use strict";var b=a.i(81751),c=a.i(91973);let d=["owner","admin","editor","viewer"];function e({initialUsers:a,viewerRole:e}){let[f,g]=(0,c.useState)(a),[h,i]=(0,c.useState)({email:"",role:"viewer",status:"invited"}),[j,k]=(0,c.useState)(!1),[l,m]=(0,c.useState)(null),n="owner"===e;async function o(a){if(a.preventDefault(),!n)return;k(!0),m(null);let b=await fetch("/api/users",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(h)});if(k(!1),!b.ok){let a=await b.json().catch(()=>({}));m(a?.message??"Unable to invite user");return}let c=await b.json();g(a=>[c.user,...a]),i({email:"",role:"viewer",status:"invited"})}async function p(a,b){(await fetch(`/api/users/${a}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(b)})).ok?g((await fetch("/api/users").then(a=>a.json())).users):alert("Unable to update user. Check your permissions and try again.")}async function q(a){confirm("Disable this user?")&&((await fetch(`/api/users/${a}`,{method:"DELETE"})).ok?g(b=>b.map(b=>b.id===a?{...b,status:"disabled"}:b)):alert("Unable to disable user."))}return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"rounded-3xl border border-slate-200 bg-white p-6 shadow-sm",children:[(0,b.jsx)("h2",{className:"text-lg font-semibold text-slate-900",children:"Invite user"}),n?(0,b.jsxs)("form",{className:"mt-5 grid gap-4 sm:grid-cols-3",onSubmit:o,children:[(0,b.jsxs)("div",{className:"sm:col-span-3",children:[(0,b.jsx)("label",{className:"text-sm font-semibold text-slate-600",children:"Email"}),(0,b.jsx)("input",{type:"email",value:h.email,onChange:a=>i(b=>({...b,email:a.target.value})),className:"mt-2 w-full rounded-xl border border-slate-200 px-4 py-2 text-sm focus:border-emerald-600 focus:outline-none focus:ring-2 focus:ring-emerald-100",placeholder:"teammate@example.com",required:!0})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm font-semibold text-slate-600",children:"Role"}),(0,b.jsx)("select",{value:h.role,onChange:a=>i(b=>({...b,role:a.target.value})),className:"mt-2 w-full rounded-xl border border-slate-200 px-4 py-2 text-sm focus:border-emerald-600 focus:outline-none focus:ring-2 focus:ring-emerald-100",children:d.map(a=>(0,b.jsx)("option",{value:a,children:a},a))})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm font-semibold text-slate-600",children:"Status"}),(0,b.jsxs)("select",{value:h.status,onChange:a=>i(b=>({...b,status:a.target.value})),className:"mt-2 w-full rounded-xl border border-slate-200 px-4 py-2 text-sm focus:border-emerald-600 focus:outline-none focus:ring-2 focus:ring-emerald-100",children:[(0,b.jsx)("option",{value:"invited",children:"Invited"}),(0,b.jsx)("option",{value:"active",children:"Active"}),(0,b.jsx)("option",{value:"disabled",children:"Disabled"})]})]}),(0,b.jsxs)("div",{className:"sm:col-span-3",children:[(0,b.jsx)("button",{type:"submit",disabled:j,className:"w-full rounded-xl bg-emerald-600 px-4 py-3 text-sm font-semibold uppercase tracking-wide text-white transition hover:bg-emerald-700 disabled:cursor-not-allowed disabled:opacity-70",children:j?"Sending invite...":"Send invite"}),l?(0,b.jsx)("p",{className:"mt-2 text-sm text-red-600",children:l}):null]})]}):(0,b.jsx)("p",{className:"mt-4 text-sm text-slate-500",children:"Only owners can invite new users."})]}),(0,b.jsxs)("div",{className:"rounded-3xl border border-slate-200 bg-white p-6 shadow-sm",children:[(0,b.jsx)("h2",{className:"text-lg font-semibold text-slate-900",children:"Team"}),(0,b.jsx)("div",{className:"mt-4 overflow-x-auto",children:(0,b.jsxs)("table",{className:"min-w-full divide-y divide-slate-100 text-sm",children:[(0,b.jsx)("thead",{children:(0,b.jsxs)("tr",{className:"text-left text-xs uppercase tracking-wide text-slate-500",children:[(0,b.jsx)("th",{className:"px-3 py-3",children:"Email"}),(0,b.jsx)("th",{className:"px-3 py-3",children:"Role"}),(0,b.jsx)("th",{className:"px-3 py-3",children:"Status"}),(0,b.jsx)("th",{className:"px-3 py-3",children:"Actions"})]})}),(0,b.jsx)("tbody",{className:"divide-y divide-slate-100",children:f.map(a=>(0,b.jsxs)("tr",{children:[(0,b.jsx)("td",{className:"px-3 py-3 font-semibold",children:a.email}),(0,b.jsx)("td",{className:"px-3 py-3",children:a.role}),(0,b.jsx)("td",{className:"px-3 py-3",children:a.status}),(0,b.jsx)("td",{className:"px-3 py-3",children:(0,b.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,b.jsx)("button",{onClick:()=>p(a.id,{status:"disabled"===a.status?"active":"disabled"}),className:"rounded-full border border-slate-200 px-4 py-1 text-xs font-semibold uppercase tracking-wide text-slate-600 hover:border-emerald-200 hover:text-emerald-700",children:"disabled"===a.status?"Activate":"Disable"}),"owner"!==a.role?(0,b.jsx)("button",{onClick:()=>p(a.id,{role:"viewer"===a.role?"editor":"viewer"}),className:"rounded-full border border-slate-200 px-4 py-1 text-xs font-semibold uppercase tracking-wide text-slate-600 hover:border-emerald-200 hover:text-emerald-700",children:"Toggle Role"}):null,(0,b.jsx)("button",{onClick:()=>p(a.id,{password:Array.from(globalThis.crypto.getRandomValues(new Uint8Array(6)),a=>(a%36).toString(36)).join("")}),className:"rounded-full border border-slate-200 px-4 py-1 text-xs font-semibold uppercase tracking-wide text-slate-600 hover:border-emerald-200 hover:text-emerald-700",children:"Reset Password"}),"owner"===e?(0,b.jsx)("button",{onClick:()=>q(a.id),className:"rounded-full border border-red-200 px-4 py-1 text-xs font-semibold uppercase tracking-wide text-red-600 hover:bg-red-50",children:"Archive"}):null]})})]},a.id))})]})})]})]})}a.s(["UsersTable",()=>e])}];

//# sourceMappingURL=admin-portal_src_components_tables_UsersTable_tsx_62d3a777._.js.map